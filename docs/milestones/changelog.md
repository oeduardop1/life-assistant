# Changelog

> Hist√≥rico de progresso dos milestones.

---

## 2026

### Fevereiro

| Data | Milestone | A√ß√£o | Notas |
|------|-----------|------|-------|
| 2026-02-08 | M2.3 | Documenta√ß√£o | Spec goals.md reescrita (10 se√ß√µes alinhadas com finance/tracking), schema fix (NOT NULL fields, subArea), 5 AI tools detalhadas, 11 API endpoints, status transitions, backend dentro de tracking module, frontend como tab. M2.3 detalhado (~55 tasks granulares). |
| 2026-02-04 | M2.1 | P√°gina de H√°bitos Redesign | Implementa√ß√£o completa de HabitDetailPanel similar a MetricDetailPanel. **Backend:** `GET /habits/:id/completions` endpoint com query params (startDate, endDate), `GetHabitCompletionsQueryDto`, `getCompletionsWithStats()` service method, c√°lculo de completionRate baseado na frequ√™ncia do h√°bito. **Frontend:** 5 novos componentes (HabitSelector, HabitDetailPanel, CompletionHeatmap, HabitStatsSidebar, HabitPeriodGrouping), hook `useHabitCompletions`, type `HabitCompletionsWithStats`, CSS variables para heatmap (--habit-dot-completed/missed/future/not-expected). **UI:** Grid 12 semanas com anima√ß√µes Framer Motion, legenda de cores, timeline de conclus√µes recentes, estat√≠sticas (streak atual, recorde, consist√™ncia %, total). **Vista Alternativa:** Agrupamento por per√≠odo do dia (manh√£/tarde/noite/qualquer hora) com toggle no header (Grid ‚Üî Per√≠odo). P√°gina `/tracking/habits` completamente reescrita com seletor horizontal + painel de detalhes. |
| 2026-02-03 | M2.1 | Auditoria & Conclus√£o | **AUDITORIA DE C√ìDIGO:** Compara√ß√£o milestone vs c√≥digo fonte revelou que M2.1 estava ~95% implementado mas apenas ~30% marcado. **Status atualizado:** üü°‚Üíüü¢. **Backend 100%:** Habits (tabelas, controller 8 endpoints, service com streaks, repository, RLS, AI tools record_habit/get_habits), Calendar API (3 endpoints, CalendarService), Custom Metrics (CRUD completo). **Frontend 100%:** Calend√°rio (CalendarMonth, DayCell, SwipeableCalendar, MonthSelector), Vista do Dia (DayDetailModal com 10 sub-componentes), Streaks page, M√©tricas page (MetricSelector, MetricDetailPanel, GroupedTimeline, filtros), Gerenciamento de H√°bitos (HabitForm, modals, HabitList), todos os hooks (habits, calendar, tracking, custom-metrics). **Corrigido:** ManualTrackForm redesenhado com chips visuais para suporte a custom metrics. **Pendente:** Apenas valida√ß√£o customMetricId no TrackingService (opcional) e testes formais. |
| 2026-02-03 | M2.1 | Custom Metrics | Implementa√ß√£o completa de m√©tricas personalizadas. **Backend:** tabela `custom_metric_definitions` com RLS, `CustomMetricController` (5 endpoints CRUD), `CustomMetricService` (valida√ß√£o nome √∫nico case-insensitive, min/max), `CustomMetricRepository` com Drizzle. **Frontend:** tipos `CustomMetricDefinition`/`CreateCustomMetricInput`/`UpdateCustomMetricInput`, 5 hooks React Query (useCustomMetrics, useCustomMetric, useCreateCustomMetric, useUpdateCustomMetric, useDeleteCustomMetric), componentes CustomMetricForm/CreateCustomMetricModal/EditCustomMetricModal/DeleteCustomMetricDialog/CustomMetricsManager, integra√ß√£o no MetricSelector (exibe m√©tricas custom), bot√£o "Gerenciar M√©tricas" na p√°gina /tracking/metrics. |
| 2026-02-03 | M2.1 | Exibi√ß√£o Cor/√çcone | Implementado exibi√ß√£o de cor personalizada nos h√°bitos. Backend: `GET /habits/streaks` agora retorna campo `color`. Frontend: tipo `HabitStreakInfo` atualizado, cor aplicada como background com opacidade em `HabitCheckbox`, `HabitList` e `StreaksPage`. |
| 2026-02-02 | M2.1 | Reformula√ß√£o | M2.1 completamente reformulado para alinhar com nova spec `tracking.md`. **Nova UI:** Calend√°rio mensal "Year in Pixels" como vista principal (substitui dashboard de cards). **Removido:** MetricCardsGrid, TrackingHistory, TrackingEmptyState, testes de componentes antigos, E2E antigos. **Mantido:** Backend de m√©tricas inteiro (CRUD, valida√ß√µes, agrega√ß√µes, AI tools), types.ts, hooks/use-tracking.ts, ManualTrackForm, MetricCard, MetricChart. **Novo:** Sistema de h√°bitos com streaks, Calendar API endpoints, abas (Calend√°rio/Insights/Streaks), Vista do Dia com h√°bitos + m√©tricas. Tasks reorganizadas em se√ß√µes claras. |
| 2026-02-01 | M2.1 | Code Sync | C√≥digo alinhado com documenta√ß√£o: (1) Removido habit-freezes.ts e todas refer√™ncias, (2) Enum habit_frequency corrigido de ['daily','weekly','custom'] para ['daily','weekdays','weekends','custom'], (3) Coment√°rios atualizados com refer√™ncias corretas de milestones (M2.1=Tracking&Habits, M2.3=Goals). Migration 0002 gerada. |
| 2026-02-01 | M2.4 | Simplificado | CRM Pessoal removido ‚Äî informa√ß√µes sobre pessoas agora via Memory (Knowledge Items com type='person'). Tabelas removidas: people, person_notes, person_interactions. AI Tools removidas: get_person, update_person. Enums removidos: relationship_type, interaction_type. √Årea 'relationships' do Life Balance Score retorna 50 (neutro) at√© usu√°rio fornecer dados via conversas/journals. Docs: people.md exclu√≠do, data-conventions.md/ai-personality.md/tracking.md/family.md/memory.md/ADR-012 atualizados. |
| 2026-02-01 | M2.1, M2.3 | Reestrutura√ß√£o | Merge de Tracking + Habits em m√≥dulo √∫nico `/tracking` (M2.1). M2.3 renomeado para apenas "Metas (Goals)". Removido conceito de freeze/grace period de h√°bitos (simplifica√ß√£o - streak quebra imediatamente se pular dia esperado). Docs: tracking.md (expandido com habits), goals.md (criado), goals-habits.md (removido). data-conventions.md atualizado com enums `habit_frequency` (daily/weekdays/weekends/custom) e `period_of_day` (morning/afternoon/evening/anytime), removido `habit_freezes`. |

### Janeiro

| Data | Milestone | A√ß√£o | Notas |
|------|-----------|------|-------|
| 2026-01-30 | M0.11 | Bugfix | Email Change: corrigido fluxo de altera√ß√£o de email. (1) Alterado `updateEmail` de Admin API para REST API (`PUT /auth/v1/user`) que envia email de verifica√ß√£o automaticamente. (2) Adicionado trigger `on_auth_user_email_updated` para sincronizar `auth.users.email` ‚Üí `public.users.email` ap√≥s confirma√ß√£o. (3) Controller agora extrai access token do header para passar ao adapter. (4) Verifica√ß√£o de email em uso agora via query direta no banco (mais confi√°vel). Docs: supabase-auth.md, settings.md atualizados. |
| 2026-01-29 | M0.11 | Conclu√≠do | Settings Base: m√≥dulo settings com endpoints (profile/email/password), valida√ß√£o zxcvbn-ts (score >= 2), rate limiting OWASP (3/h email, 5/h senha), frontend com Tabs/Cards responsivos, PasswordStrengthMeter, 859 API tests + 439 Web tests passando. Audit logging adicionado ao backlog. |
| 2026-01-29 | M1.11, M3.7 | Removido | M√≥dulo de decis√µes eliminado por redund√¢ncia. Decis√µes importantes ser√£o salvas via `add_knowledge` com formato consistente. An√°lise mostrou que 4 tabelas dedicadas + tool `save_decision` + follow-up job eram over-engineering ‚Äî sistema de mem√≥ria existente j√° cobre a funcionalidade. |
| 2026-01-29 | ADR-016 | Reescrito | "Decisions via Knowledge Items" substitui vers√£o anterior. Nova abordagem: usar `add_knowledge` em vez de m√≥dulo dedicado. Se√ß√£o History documenta mudan√ßa. |
| 2026-01-27 | M2.2 | Pagamento Antecipado | D√≠vidas: suporte a pagamento antecipado de parcelas. `debt_payments.monthYear` agora representa "para qual m√™s √© a parcela" (n√£o "quando foi pago"). Migration 0004 recalcula dados existentes. Novos endpoints: `GET :id/payments` (hist√≥rico com paidEarly), `GET upcoming-installments` (calend√°rio do m√™s), `GET :id/projection` (proje√ß√£o de quita√ß√£o). AI tools: `get_debt_payment_history`, `get_upcoming_installments`. `get_debt_progress` enriquecido com proje√ß√£o (estimatedPayoffMonthYear, remainingMonths, velocity). Frontend: hooks useDebtPaymentHistory, useUpcomingInstallments, useDebtProjection. |
| 2026-01-27 | M2.2 | Simplificado | Visibilidade de d√≠vidas segue padr√£o da ind√∫stria (Mobills, YNAB, Organizze): d√≠vida s√≥ aparece de startMonthYear at√© endMonth. Removido conceito de "car√™ncia" (grace period). Backend: debts.repository.ts, finance-tool-executor.service.ts. Frontend: debt-card.tsx (removido badge "Em car√™ncia"), types.ts (removido isDebtInGracePeriod). Docs: finance.md ¬ß3.6 atualizado. |
| 2026-01-27 | M2.2 | Bugfix | KPIs de d√≠vidas corrigidos: (1) "Total Pago" agora inclui pagamentos de d√≠vidas quitadas (paid_off), (2) "Parcelas Pr√≥ximas" conta apenas d√≠vidas ativas/overdue, (3) "Total de D√≠vidas" calcula restante apenas de d√≠vidas ativas, (4) "Total Or√ßado" filtra d√≠vidas por m√™s (monthYear passado para getSummary). Frontend: DebtCard colaps√°vel (clique expande/colapsi detalhes). |
| 2026-01-25 | Infra | feat(migrations): consolidate to Drizzle single source of truth | Removido sistema de migrations Supabase. Drizzle agora √© √∫nica fonte para schema. Migration 0000_luxuriant_wraith.sql reescrita com padr√µes idempotentes (DO $$ EXCEPTION WHEN duplicate_object, IF NOT EXISTS). Triggers updated_at + auth sync inclu√≠dos. Removido bootstrap-migrations.ts e db:bootstrap. CI atualizado com db:migrate step. Docs: CLAUDE.md, README.md, DEPLOYMENT.md, ci.yml, changelog.md. |
| 2026-01-24 | Infra | fix(dev-start): replace db:push with db:migrate | Previne perda de dados no startup di√°rio. bootstrap-migrations.ts registra migrations existentes para DBs criados via push. Detecta banco novo vs existente, seed condicional (apenas primeiro setup ou --seed flag). Atualizado: CLAUDE.md, engineering.md, README.md. |
| 2026-01-24 | M2.2 | Finance Tools Enhancement | 4 novas READ tools (get_bills, get_expenses, get_incomes, get_investments) + enriquecimento get_finance_summary com breakdown (bills/expenses/debts). AI agora acessa 100% dos detalhes financeiros individuais. Prompt melhorado com fluxo obrigat√≥rio de an√°lise e distin√ß√£o clara entre categorias. Docs: ai.md, product.md, system.md atualizados. |
| 2026-01-24 | M2.2 | Recorr√™ncias - Lazy Generation | Substitu√≠do job-based por lazy generation: `recurringGroupId` (UUID) + UNIQUE constraint em bills/expenses/incomes, `ensureRecurringForMonth()` gera entradas sob demanda, scope-based edit/delete ('this'/'future'/'all'), `RecurringScopeDialog` no frontend, `ScopeQueryDto` no backend. Reposit√≥rios: 7 novos m√©todos x3 entidades. Testes: +19 unit (bills/expenses/incomes recurring), +16 integration (lazy gen + scope ops), +10 frontend (RecurringScopeDialog + delete dialogs). Migration aplicada. ADR-018 criado. Docs atualizados: system.md, data-model.md, engineering.md, product.md, phase-2-tracker.md. |
| 2026-01-23 | M2.2 | Bugfix - C√°lculos Dashboard | Corrigido Total Gasto: (1) bills pagas agora usa SQL SUM real em vez de estimativa por ratio, (2) criada tabela `debt_payments` para rastreio mensal de parcelas pagas, (3) parcelas de d√≠vida inclu√≠das no Total Gasto. Migration baseline regenerada (33 tabelas). CLAUDE.md atualizado com se√ß√£o Database Development. |
| 2026-01-23 | Infra | Database Migrations | Regenerada migration baseline com schema completo (33 tabelas, 30 enums). Corrigido drift: schema Finance (M2.2) n√£o tinha migra√ß√£o. Documenta√ß√£o atualizada: data-model.md, engineering.md, CLAUDE.md. |
| 2026-01-22 | M2.2 | Testes de Integra√ß√£o - Filtros e Pagina√ß√£o | 44 testes de integra√ß√£o: filtro monthYear (bills/incomes/expenses), filtro status (bills pending/paid/overdue, debts active/paid_off), filtro category (bills/expenses), filtro isNegotiated (debts), pagina√ß√£o limit/offset, metadata total. Testes extras: combined filters, isRecurring, type, multi-tenant isolation. Arquivo: finance-filters-pagination.integration.spec.ts. Padr√£o: inline controller + mock data + filterAndPaginate helper + supertest + JWT auth. |
| 2026-01-22 | M2.2 | Testes de Integra√ß√£o - Regras de Neg√≥cio | 4 testes de integra√ß√£o: d√≠vida n√£o negociada n√£o entra no total or√ßado, pagar parcela atualiza KPIs, pagar √∫ltima parcela muda status para paid_off, negociar d√≠vida inclui no total or√ßado. Arquivo: finance-business-rules.integration.spec.ts. Padr√£o: inline controller + mock data mut√°vel + supertest + JWT auth. |
| 2026-01-22 | M2.2 | Testes Unit√°rios - Services | 5 arquivos de teste: incomes.service.spec.ts (13), bills.service.spec.ts (16), variable-expenses.service.spec.ts (12), debts.service.spec.ts (21), investments.service.spec.ts (13). Cobertura: CRUD operations, NotFoundException/BadRequestException, markPaid/markUnpaid, payInstallment (valida√ß√µes: n√£o negociada, j√° quitada), negotiate (valida√ß√£o: j√° negociada), updateValue, getSummary, sumByMonthYear. FinanceSummaryUseCase j√° coberto por finance-summary.service.spec.ts existente (13 tests). 75 novos testes, total 786 tests passando. |
| 2026-01-22 | M2.2 | Testes Unit√°rios - Valida√ß√µes | 5 arquivos de teste: income.dto.spec.ts, bill.dto.spec.ts, variable-expense.dto.spec.ts, investment.dto.spec.ts, debt.dto.spec.ts. 169 novos testes cobrindo: valida√ß√£o de DTOs (class-validator), campos required/optional, enums, formatos (monthYear YYYY-MM, deadline ISO), ranges num√©ricos (amount > 0, dueDay 1-31), valida√ß√£o condicional de d√≠vidas (service-level). Fix DTOs: @Min(0) ‚Üí @Min(0.01) em income/bill/expense/debt para campos que devem ser > 0. Total 222 testes finance passando. |
| 2026-01-22 | M2.2 | Testes Unit√°rios - C√°lculos | 3 arquivos de teste: finance-summary.service.spec.ts (13 tests), debts.repository.spec.ts (15 tests), investments.repository.spec.ts (10 tests). Cobertura: KPIs principais (renda, or√ßado, gasto, saldo), KPIs de d√≠vidas (total, parcela mensal, pago, restante), progresso por d√≠vida (parcelas, %), progresso de investimento (currentAmount/goalAmount), exclus√£o de n√£o negociadas do Total Or√ßado. Total 542 tests passando. |
| 2026-01-22 | M2.2 | P√°gina Investimentos | P√°gina `/finance/investments`: 11 componentes (investment-card, investment-list, investment-summary, investment-form, investment-progress-bar, create-investment-modal, edit-investment-modal, update-value-modal, delete-investment-dialog, index), hook use-investments.ts (CRUD + updateValue + calculateInvestmentTotals), types (Investment, InvestmentType, InvestmentProgress, InvestmentTotals, helpers calculateInvestmentProgress/calculateInvestmentTotals/formatInvestmentDeadline). UI: KPI cards (total investido, metas, aporte mensal, progresso m√©dio), progress bar por investimento, deadline badge. 10 test files: 95 investment tests (18 card + 5 list + 8 summary + 10 progress-bar + 8 form + 6 create-modal + 7 edit-modal + 9 update-value-modal + 9 delete-dialog + 15 hook). Total 420 tests passando. E2E specs criados. Bug fix: debt-stats.test.tsx progressPercentage‚ÜíprogressPercent. |
| 2026-01-22 | M2.2 | Testes Completos D√≠vidas | Adicionados 2 testes faltantes: debt-stats.test.tsx (10 tests), pay-installment-dialog.test.tsx (13 tests). Total 69 testes de debt (antes 46). Cobertura completa de componentes debt/. |
| 2026-01-22 | M2.2 | P√°gina D√≠vidas | P√°gina `/finance/debts`: 14 componentes (debt-card, debt-list, debt-summary, debt-form, debt-progress-bar, debt-stats, create-debt-modal, edit-debt-modal, delete-debt-dialog, negotiate-debt-modal, pay-installment-dialog, index), hook use-debts.ts (CRUD + payInstallment + negotiate), types (Debt, DebtStatus, DebtProgress, DebtTotals, helpers calculateDebtProgress/calculateDebtTotals). UI: 2 se√ß√µes (Negociadas/Pendentes), 4 KPIs, filtros por status. Fluxo: pendente ‚Üí negociar ‚Üí pagar parcelas ‚Üí auto-quita√ß√£o. 69 debt tests + E2E specs criados. |
| 2026-01-22 | M2.2 | P√°gina Despesas Vari√°veis | P√°gina `/finance/expenses`: 8 componentes (expense-card, expense-list, expense-summary, expense-form, create-expense-modal, edit-expense-modal, delete-expense-dialog, index), hook use-expenses.ts (CRUD + calculateExpenseTotals), types (Expense, ExpenseCategory, ExpenseTotals, constants com 13 categorias). UI: duas se√ß√µes (Recorrentes e Pontuais) com empty states, progress bar Tailwind, resumo com varia√ß√£o. 256 tests passando. |
| 2026-01-22 | M2.2 | P√°gina Contas Fixas | P√°gina `/finance/bills`: 8 componentes (bill-card, bill-list, bill-summary, bill-form, create-bill-modal, edit-bill-modal, delete-bill-dialog, index), hook use-bills.ts (CRUD + markPaid/markUnpaid + calculateBillTotals), types (Bill, BillCategory, BillStatus, constants). UI: checkbox.tsx e tabs.tsx criados. 8 test files (256 tests passando). E2E pendente (infraestrutura RLS). Testado manualmente. |
| 2026-01-22 | M2.2 | P√°gina Rendas | P√°gina `/finance/incomes`: 7 componentes (income-card, income-list, income-summary, income-form, create-income-modal, edit-income-modal, delete-income-dialog), hook useIncomes.ts (CRUD + calculateIncomeTotals + calculateVariance), 8 test files (43 tests), E2E Page Object + 8 specs. Fix: ResizeObserver mock para Radix UI, react-hook-form com valida√ß√£o nativa (Zod v4 incompat√≠vel com zodResolver). |
| 2026-01-22 | M2.2 | Frontend | Navega√ß√£o, Layout e Dashboard Finance: sidebar item, layout.tsx (MonthSelector + FinanceNavTabs), page.tsx com 8 KPI cards + 3 gr√°ficos (BudgetVsReal, ExpenseDistribution, MonthlyEvolution) + listas resumidas + estados. Types, hooks (useMonthNavigation, useFinanceSummary), FinanceContext. 6 component tests, 2 hook tests, 1 types test, 11 E2E tests. |
| 2026-01-21 | M2.2 | Tools para IA | 5 finance tools implementadas: get_finance_summary, get_pending_bills, mark_bill_paid (confirma√ß√£o), create_expense (confirma√ß√£o), get_debt_progress. FinanceToolExecutorService com mapeamento de categorias PT‚ÜíEN. 5 tool definitions no @life-assistant/ai. Integra√ß√£o com ChatService. Unit tests + integration tests (32 arquivos, 504 tests passando). |
| 2026-01-21 | M2.2 | Backend | M√≥dulo Finance backend: 7 enums PostgreSQL, 5 tabelas (incomes, bills, variable_expenses, debts, investments), 29 arquivos de c√≥digo (6 controllers, 6 services, 5 repositories, 5 ports, 6 DTOs, 1 module), 31 endpoints REST (25 CRUD + 5 a√ß√µes especiais + 1 resumo), c√°lculos de KPIs em FinanceSummaryService, valida√ß√µes com class-validator, filtros e pagina√ß√£o. Pendente: Jobs, Tools IA, Notifica√ß√µes, Frontend, Testes. |
| 2026-01-21 | ADR-017 | Refactor | Reestrutura√ß√£o de Life Areas: 8 √°reas flat ‚Üí 6 √°reas principais + 16 sub-√°reas hier√°rquicas. health (physical/mental/leisure), finance (budget/savings/debts/investments), professional (career/business), learning (formal/informal), spiritual (practice/community), relationships (family/romantic/social). ~50 arquivos atualizados: enums, schemas, DTOs, services, repositories, frontend components, tests. Prepara√ß√£o para c√°lculo de Life Balance Score granular. |
| 2026-01-21 | M2.1 | Enhancement | Detec√ß√£o de intent via LLM: nova tool `respond_to_confirmation` com `toolChoice` for√ßado. Substitui regex patterns por interpreta√ß√£o via LLM. Reconhece varia√ß√µes naturais ("beleza", "manda ver", "bora"). `ToolChoice` estendido para `{ type: 'tool', toolName }`. Adapters Gemini (`allowedFunctionNames`) e Claude (`{ type: 'tool', name }`) atualizados. SEM fallback para regex. |
| 2026-01-21 | M2.1 | Refactor | Removido `delete_metrics` (batch) - LLM alucinava IDs. Agora usa chamadas paralelas de `delete_metric` com UUIDs reais. |
| 2026-01-20 | M2.1 | Bug fix | Fix GAP 6 (v2): "exclua todos" n√£o funcionava - sistema armazenava confirma√ß√£o em vez de executar. Causa: "exclua" (imperativo de excluir) n√£o estava nos patterns de `isUpdateDeleteConfirmation()`. Fix: Adicionado "exclua" em 3 regex patterns. Revertido c√≥digo complexo em `continueToolLoopAfterAutoConfirm()` que quebrava com assistant message vazia. |
| 2026-01-20 | M2.1 | UX | Fix GAP 5: Eliminada confirma√ß√£o dupla para update_metric/delete_metric. Quando usu√°rio j√° confirma na mensagem ("pode atualizar", "corrige pra mim"), sistema executa diretamente. IA pergunta de forma amig√°vel, sistema detecta intent e executa. Docs: ai.md ¬ß9.3, ¬ß9.7. |
| 2026-01-20 | M2.1 | Bug fix | Fix GAP 4: LLM estava alucinando IDs (ex: `sleep-12345`) em vez de usar UUIDs reais de `get_tracking_history`. Fix: tool descriptions enfatizam uso de IDs EXATOS, system prompt com exemplo real de fluxo, resposta do executor inclui `_note` de instru√ß√£o. |
| 2026-01-20 | M2.1 | Bug fix | Fix GAP 3: Tools `update_metric`/`delete_metric` n√£o estavam registrados em `availableTools` e `toolToExecutorMap` do ChatService. Fix: padr√µes de detec√ß√£o de intent ampliados para aceitar "sim, fa√ßa isso" e variantes. 6 novos testes para patterns. |
| 2026-01-20 | M2.1 | Enhancement | Gap 2: Tools `update_metric` e `delete_metric` para corre√ß√£o/dele√ß√£o de registros existentes. Fix `get_tracking_history` para retornar `id`. System prompt com instru√ß√µes de datas relativas. 12 novos testes. Docs: ai.md ¬ß6.2, ¬ß9.1, ¬ß9.2, ¬ß9.7; system.md ¬ß3.3 |
| 2026-01-20 | M2.1 | Bug fix | Fix confirmation loop (Gap 1): Sistema agora detecta intent do usu√°rio ("sim"/"n√£o"/corre√ß√£o) ANTES de iniciar tool loop. `requiresConfirmation: true` mantido. Intent detection via regex em `ChatService.detectUserIntent()`. Fix adicional: `find()` ‚Üí `findLast()` para pegar mensagem mais recente. +197 linhas chat.service.ts, +250 linhas testes |
| 2026-01-20 | M2.1 | Conclu√≠do | Testes completos (243 total): 42 unit backend, 9 integration, 22 component, 8 hooks, 162 E2E. Tasks expandidas de 10 para 25. Fixes E2E: sidebar toggle, mobile-chrome skips, memory search debounce |
| 2026-01-19 | M3.8 | Criado | Decision Support Framework (ADR-016): persist√™ncia de decis√µes, tool `save_decision`, follow-up job, learning loop via Memory Consolidation. Tabelas j√° existem no banco (M0.4), milestone cria schema TypeScript e implementa√ß√£o completa |
| 2026-01-19 | Docs | Atualizado | Documenta√ß√£o completa de Decision Support: product.md (¬ß1.4, ¬ß2.1, ¬ß5.1, ¬ß6.18), system.md (¬ß1.9, ¬ß3.12), ai.md (¬ß4.1, ¬ß6.2, ¬ß6.5.2, ¬ß6.9), data-model.md (¬ß4.18), engineering.md (¬ß2.4, ¬ß7.1). TBD-206 resolvido |
| 2026-01-19 | M2.6 | Criado | M√≥dulo Finance: planejamento financeiro mensal com rendas, contas fixas, despesas vari√°veis (recorrentes + pontuais), d√≠vidas com parcelas, investimentos. Dashboard com KPIs, gr√°ficos, notifica√ß√µes de vencimento, integra√ß√£o com IA |
| 2026-01-16 | M0.8 | Migra√ß√£o | `middleware.ts` ‚Üí `proxy.ts` (Next.js 16 convention). Corrigido technical debt marcado incorretamente como N/A. Atualizados coment√°rios em server.ts e callback-recovery/route.ts |
| 2026-01-16 | Backlog | Adicionado | Se√ß√£o "Seguran√ßa e RLS" no Backlog T√©cnico. 14 tabelas precisam de RLS nas migrations Supabase. Nota adicionada no M0.4 sobre gap identificado |
| 2026-01-15 | M1.3 | Bug fix | Corrigido bug cr√≠tico no Memory Consolidation (Zod null handling) que impedia cria√ß√£o de knowledge items. Melhorado script trigger (`--wait` flag). 6 novos testes. Docs atualizados (AI_SPECS ¬ß6.5, ENGINEERING ¬ß7.6) |
| 2026-01-15 | M1.9 | Chat UX | Markdown rendering com Streamdown + @tailwindcss/typography. Bug fixes: typing indicator (ThinkingIndicator + typewriter + auto-scroll), Memory area cards (√≠cones Lucide, truncate texto) |
| 2026-01-15 | M1.9 | UI Impl. | 14 tasks de UI implementadas: ErrorBoundary support link, empty states (Chat/Memory), error states com retry, toasts CRUD (Chat), dashboard skeleton, responsividade (sidebar mobile overlay, layouts responsive). Testes pendentes |
| 2026-01-15 | M1.9 | Reestruturado | Removidas tasks j√° implementadas em M0.6/M1.2/M1.4. Mantidas apenas: ajustes de texto (SYSTEM_SPECS ¬ß4.1), toasts Chat, responsividade, testes E2E. Tasks: 25‚Üí16 |
| 2026-01-15 | M1.8 | Movido | Confirma√ß√£o de Tracking via Chat incorporado ao M2.1 ‚Äî depende de infraestrutura de tracking. M1.9‚ÜíM1.8, M1.10‚ÜíM1.9, M1.11‚ÜíM1.10 |
| 2026-01-15 | Docs | Atualizado | Gap Analysis: documentados fallbacks (AI_SPECS ¬ß10.4), tool loop limits (¬ß6.8), conflict resolution (SYSTEM_SPECS ¬ß3.5, AI_SPECS ¬ß6.5.5), tool call logging (ENGINEERING ¬ß5.5), Racioc√≠nio Inferencial (PRODUCT_SPECS ¬ß6.2). Tasks adicionadas: M1.9 (Logging Seguro), Backlog (stale memory) |
| 2026-01-15 | M1.5 | Removido | Conflita com filosofia Jarvis-first; knowledge_items cobre funcionalidade |
| 2026-01-15 | M1.4 | Removido | Intent Classification redundante com Tool Use (ADR-012). Se√ß√£o 5 do docs/specs/ai.md removida. Diagrama e comandos no docs/specs/system.md atualizados. |
| 2026-01-14 | M1.6.1 | Conclu√≠do | Temporal Knowledge Management: detec√ß√£o de mudan√ßas de estado, UI toggle "Ver hist√≥rico", export com metadados temporais |
| 2026-01-14 | M1.6 | Conclu√≠do | Memory View completo: endpoints, filtros, UI /memory, testes unit/integration (E2E pendentes) |
| 2026-01-14 | M1.3 | Corre√ß√µes | Seguran√ßa: removido userId do admin endpoint. Bug fix: refreshSchedulers() no onboarding. Testes e docs atualizados |
| 2026-01-14 | M1.3 | DevTools | Admin endpoint para disparo manual do Memory Consolidation Job: AdminModule, POST /admin/jobs/memory-consolidation/trigger (NODE_ENV=development only) |
| 2026-01-14 | M1.3 | Testes Int. | Testes de integra√ß√£o: memory-endpoints (14), memory-tool-executor (14), memory-consolidation (18). Total 46 novos testes, 116 integration tests passando |
| 2026-01-13 | M1.7 | Conclu√≠do | Racioc√≠nio Inferencial Real-time: tool analyze_context, executor com busca de fatos/padr√µes, system prompt com instru√ß√µes de racioc√≠nio, ADR-014, 8 novos testes unit√°rios (total 294) |
| 2026-01-13 | M1.3 | Conclu√≠do | Sistema de Mem√≥ria: UserMemoryService, KnowledgeItemsService, MemoryToolExecutor, Memory Consolidation Job (BullMQ timezone-aware), Context Builder, 106 novos testes (total 294) |
| 2026-01-13 | M1.2 | Conclu√≠do | Chat b√°sico com SSE streaming, 6 endpoints REST, @SseAuth decorator, @SkipTransform decorator, persist√™ncia URL, dialog de confirma√ß√£o de exclus√£o, 193 testes. Rate limiting ‚Üí M3.6, data purge jobs ‚Üí M3.5 |
| 2026-01-12 | M1.1 | Conclu√≠do | Package AI com LLM abstraction + Tool Use: GeminiAdapter, ClaudeAdapter, LLMFactory, rate limiting, retry, tool loop, 162 testes |
| 2026-01-08 | M0.7 | Conclu√≠do | Auth completo com Supabase: 8 endpoints, AuthProvider, middleware, 31 integration tests, 16 E2E specs, Page Objects, scripts infra |
| 2026-01-07 | M0.6 | Conclu√≠do | App web Next.js 16 com Turbopack, Tailwind v4, shadcn/ui, React Query, Zustand, Playwright E2E (12 testes), ADR-008 (Database Type Encapsulation) |
| 2026-01-07 | M0.5 | Conclu√≠do | App API NestJS com guards, interceptors, filters, decorators, health endpoints, Swagger, 150 testes (137 unit + 13 integration) |
| 2026-01-07 | M0.4 | Conclu√≠do | Package database com 28 tabelas, 21 enums, RLS policies, 230 testes (unit + integration) |
| 2026-01-07 | M0.3 | Conclu√≠do | Package config com valida√ß√£o Zod, 67 testes (100% coverage) |
| 2026-01-07 | M0.1 | Conclu√≠do | Setup completo do monorepo com Turborepo, pnpm workspaces, TypeScript, ESLint 9, Prettier, Docker Compose |
| 2026-01-06 | M0.2 | Conclu√≠do | Package shared com 8 enums, constantes, utilit√°rios e 77 testes (100% coverage) |

---

*√öltima atualiza√ß√£o: 08 Fevereiro 2026*
